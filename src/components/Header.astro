---
// src/components/Header.astro

// Get current path for active link highlighting
const currentPath = Astro.url.pathname;

const navigation = [
    { href: '/', label: 'Home' },
    { href: '/about', label: 'About' },
    { href: '/services', label: 'Services' },
    { href: '/knowledge-hub', label: 'Knowledge Hub' },
    { href: '/assessment', label: 'Assessment' },
    { href: '/heritage-wall', label: 'Heritage Wall' },
    { href: '/contact', label: 'Contact' }
];
---

<header class="bg-white shadow-lg sticky top-4 z-50 mx-4 rounded-xl md:mx-6 lg:mx-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
            <a href="/" class="text-2xl font-bold text-[#508742] transition-transform duration-300 hover:scale-105">
                Moahi Sustainable Solutions
            </a>
            <nav class="hidden md:flex space-x-8">
                <ul class="flex space-x-6" id="navMenu">
                    {navigation.map((item) => (
                        <li>
                            <a 
                                href={item.href} 
                                class={`text-[#508742] font-medium text-lg hover:text-[#3b6a30] transition-colors duration-300 relative after:absolute after:bottom-0 after:left-0 after:w-0 after:h-0.5 after:bg-[#508742] after:transition-all after:duration-300 hover:after:w-full ${currentPath === item.href ? 'after:w-full font-semibold' : ''}`}
                            >
                                {item.label}
                            </a>
                        </li>
                    ))}
                </ul>
            </nav>
            <button class="md:hidden text-[#508742] text-2xl focus:outline-none" id="mobileMenuToggle">☰</button>
        </div>
        <nav class="md:hidden">
            <ul class="hidden flex-col space-y-2 pb-4" id="navMenu">
                {navigation.map((item) => (
                    <li>
                        <a 
                            href={item.href} 
                            class={`block text-[#508742] font-medium text-lg px-4 py-2 hover:bg-[#508742]/10 transition-colors duration-300 ${currentPath === item.href ? 'bg-[#508742]/10 font-semibold' : ''}`}
                        >
                            {item.label}
                        </a>
                    </li>
                ))}
            </ul>
        </nav>
    </div>
</header>

<script>
    // Mobile menu functionality
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navMenu = document.getElementById('navMenu');
        
        if (mobileMenuToggle && navMenu) {
            mobileMenuToggle.addEventListener('click', () => {
                navMenu.classList.toggle('hidden');
                mobileMenuToggle.textContent = navMenu.classList.contains('hidden') ? '☰' : '✕';
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!mobileMenuToggle.contains(e.target) && !navMenu.contains(e.target)) {
                    navMenu.classList.add('hidden');
                    mobileMenuToggle.textContent = '☰';
                }
            });
        }
    });
</script>

<style>
    #navMenu.active {
        display: flex !important;
    }
</style>